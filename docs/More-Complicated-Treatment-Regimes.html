<!DOCTYPE html>
<html lang="en"><head>
<script src="More-Complicated-Treatment-Regimes_files/libs/clipboard/clipboard.min.js"></script>
<script src="More-Complicated-Treatment-Regimes_files/libs/quarto-html/tabby.min.js"></script>
<script src="More-Complicated-Treatment-Regimes_files/libs/quarto-html/popper.min.js"></script>
<script src="More-Complicated-Treatment-Regimes_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="More-Complicated-Treatment-Regimes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="More-Complicated-Treatment-Regimes_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="More-Complicated-Treatment-Regimes_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="More-Complicated-Treatment-Regimes_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.353">

  <meta name="author" content="Brantly Callaway">
  <meta name="dcterms.date" content="2023-10-10">
  <title>Frontiers in Difference-in-Differences</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="More-Complicated-Treatment-Regimes_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="More-Complicated-Treatment-Regimes_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="More-Complicated-Treatment-Regimes_files/libs/revealjs/dist/theme/quarto.css">
  <link href="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Frontiers in Difference-in-Differences</h1>
  <p class="subtitle">More Complicated Treatment Regimes</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Brantly Callaway <a href="https://orcid.org/0000-0000-0000-0000" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a>
</div>
<div class="quarto-title-author-email">
<a href="mailto:brantly.callaway@uga.edu">brantly.callaway@uga.edu</a>
</div>
        <p class="quarto-title-affiliation">
            University of Georgia
          </p>
    </div>
</div>

  <p class="date">October 10, 2023</p>
</section>
<section id="introduction" class="slide level2">
<h2>Introduction</h2>
<p><span class="math inline">\(\newcommand{\E}{\mathbb{E}} \newcommand{\E}{\mathbb{E}} \newcommand{\var}{\mathrm{var}} \newcommand{\cov}{\mathrm{cov}} \newcommand{\Var}{\mathrm{var}} \newcommand{\Cov}{\mathrm{cov}} \newcommand{\Corr}{\mathrm{corr}} \newcommand{\corr}{\mathrm{corr}} \newcommand{\L}{\mathrm{L}} \renewcommand{\P}{\mathrm{P}} \newcommand{\independent}{{\perp\!\!\!\perp}} \newcommand{\indicator}[1]{ \mathbf{1}\{#1\} }\)</span> The discussion (and much of the recent DID literature) has focused on the setting with staggered treatment adoption.</p>
<div class="fragment">
<p>However, this certainly does not cover the full range of possible treatments. In Part 4, we’ll primarily consider two leading extensions:</p>
<ol type="1">
<li><p>A treatment that is multi-valued or continuous (e.g., minimum wage has this flavor)</p></li>
<li><p>A treatment that can turn on and off (e.g., union status)</p></li>
</ol>
<!-- we'll discuss in the context of parallel trends, but tentatively, I think the most interesting issues here are due to complexity of the treatment (not the first step identification strategy) -->
</div>
<div class="fragment">
<p>A couple of things to notice as we go along:</p>
<ul>
<li><p>I’m not going to cover much on TWFE regressions here. They have even more sources of things that can go wrong.</p></li>
<li><p>Try to pay attention to the pattern. Even though the arguments are getting more complicated, we are still following the idea of (i) target disaggregated parameters, (ii) combine them into lower dimensional objects, (3) here there will be some additional interpretation issues that also emphasize</p></li>
</ul>
</div>
</section>
<section id="continuous-treatment-notation" class="slide level2">
<h2>Continuous Treatment Notation</h2>
<p>Potential outcomes notation</p>
<ul>
<li><p>Two time periods: <span class="math inline">\(t^*\)</span> and <span class="math inline">\(t^*-1\)</span></p>
<ul>
<li>No one treated until period <span class="math inline">\(t^*\)</span></li>
<li>Some units remain untreated in period <span class="math inline">\(t^*\)</span></li>
</ul></li>
<li><p>Potential outcomes: <span class="math inline">\(Y_{it^*}(d)\)</span></p></li>
<li><p>Observed outcomes: <span class="math inline">\(Y_{it^*}\)</span> and <span class="math inline">\(Y_{it^*-1}\)</span></p>
<p><span class="math display">\[Y_{it^*}=Y_{it^*}(D_i) \quad \textrm{and} \quad Y_{it^*-1}=Y_{it^*-1}(0)\]</span></p></li>
</ul>
</section>
<section id="parameters-of-interest-att-type" class="slide level2">
<h2>Parameters of Interest (ATT-type)</h2>
<ul>
<li><p><span class="alert">Level Effects</span> (Average Treatment Effect on the Treated)</p>
<p><span class="math display">\[ATT(d|d) := \E[Y_{t^*}(d) - Y_{t^*}(0) | D=d]\]</span></p>
<ul>
<li>Interpretation: The average effect of dose <span class="math inline">\(d\)</span> relative to not being treated <em>local to the group that actually experienced dose <span class="math inline">\(d\)</span></em></li>
<li>This is the natural analogue of <span class="math inline">\(ATT\)</span> in the binary treatment case</li>
</ul></li>
</ul>
</section>
<section id="parameters-of-interest-att-type-1" class="slide level2">
<h2>Parameters of Interest (ATT-type)</h2>
<ul>
<li><p><span class="alert">Slope Effect<span> (Average Causal Response on the Treated)</span></span></p>
<p><span class="math display">\[ACRT(d|d) := \frac{\partial ATT(l|d)}{\partial l} \Big|_{l=d}\]</span></p>
<ul>
<li>Interpretation: <span class="math inline">\(ACRT(d|d)\)</span> is the causal effect of a marginal increase in dose <em>local to units that actually experienced dose <span class="math inline">\(d\)</span></em></li>
</ul></li>
</ul>
<div class="fragment">
<p>We can view <span class="math inline">\(ACRT(d|d)\)</span> as the “building block” here. An aggregated version of it (into a single number) is <span class="math display">\[\begin{align*}
  ACRT^O := \E[ACRT(D|D)|D&gt;0]
\end{align*}\]</span></p>
<ul>
<li><p><span class="math inline">\(ACRT^O\)</span> averages <span class="math inline">\(ACRT(d|d)\)</span> over the population distribution of the dose</p></li>
<li><p>Like <span class="math inline">\(ATT^O\)</span> for staggered treatment adoption, <span class="math inline">\(ACRT^O\)</span> is the natural target parameter for the TWFE regression in this case</p></li>
</ul>
</div>
</section>
<section id="identification" class="slide level2">
<h2>Identification</h2>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>“Standard” Parallel Trends Assumption</strong></p>
</div>
<div class="callout-content">
<p>For all <span class="math inline">\(d\)</span>,</p>
<p><span class="math display">\[\E[\Delta Y_{t^*}(0) | D=d] = \E[\Delta Y_{t^*}(0) | D=0]\]</span></p>
</div>
</div>
</div>
</section>
<section id="identification-1" class="slide level2">
<h2>Identification</h2>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>“Standard” Parallel Trends Assumption</strong></p>
</div>
<div class="callout-content">
<p>For all <span class="math inline">\(d\)</span>,</p>
<p><span class="math display">\[\E[\Delta Y_{t^*}(0) | D=d] = \E[\Delta Y_{t^*}(0) | D=0]\]</span></p>
</div>
</div>
</div>
<p>Then,</p>
<div class="fragment">
<p><span class="math display">\[
\begin{aligned}
ATT(d|d) &amp;= \E[Y_{t^*}(d) - Y_{t^*}(0) | D=d] \hspace{150pt}
\end{aligned}
\]</span></p>
</div>
</section>
<section id="identification-2" class="slide level2" data-visibility="uncounted">
<h2>Identification</h2>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>“Standard” Parallel Trends Assumption</strong></p>
</div>
<div class="callout-content">
<p>For all <span class="math inline">\(d\)</span>,</p>
<p><span class="math display">\[\E[\Delta Y_{t^*}(0) | D=d] = \E[\Delta Y_{t^*}(0) | D=0]\]</span></p>
</div>
</div>
</div>
<p>Then,</p>
<p><span class="math display">\[
\begin{aligned}
ATT(d|d) &amp;= \E[Y_{t^*}(d) - Y_{t^*}(0) | D=d] \hspace{150pt}\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=d] - \E[Y_{t^*}(0) - Y_{t^*-1}(0) | D=d]
\end{aligned}
\]</span></p>
</section>
<section id="identification-3" class="slide level2" data-visibility="uncounted">
<h2>Identification</h2>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>“Standard” Parallel Trends Assumption</strong></p>
</div>
<div class="callout-content">
<p>For all <span class="math inline">\(d\)</span>,</p>
<p><span class="math display">\[\E[\Delta Y_{t^*}(0) | D=d] = \E[\Delta Y_{t^*}(0) | D=0]\]</span></p>
</div>
</div>
</div>
<p>Then,</p>
<p><span class="math display">\[
\begin{aligned}
ATT(d|d) &amp;= \E[Y_{t^*}(d) - Y_{t^*}(0) | D=d] \hspace{150pt}\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=d] - \E[Y_{t^*}(0) - Y_{t^*-1}(0) | D=d]\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=d] - \E[\Delta Y_{t^*}(0) | D=0]
\end{aligned}
\]</span></p>
</section>
<section id="identification-4" class="slide level2" data-visibility="uncounted">
<h2>Identification</h2>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>“Standard” Parallel Trends Assumption</strong></p>
</div>
<div class="callout-content">
<p>For all <span class="math inline">\(d\)</span>,</p>
<p><span class="math display">\[\E[\Delta Y_{t^*}(0) | D=d] = \E[\Delta Y_{t^*}(0) | D=0]\]</span></p>
</div>
</div>
</div>
<p>Then,</p>
<p><span class="math display">\[
\begin{aligned}
ATT(d|d) &amp;= \E[Y_{t^*}(d) - Y_{t^*}(0) | D=d] \hspace{150pt}\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=d] - \E[Y_{t^*}(0) - Y_{t^*-1}(0) | D=d]\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=d] - \E[\Delta Y_{t^*}(0) | D=0]\\
&amp;= \E[\Delta Y_{t^*} | D=d] - \E[\Delta Y_{t^*} | D=0]
\end{aligned}
\]</span></p>
<p><mark>This is exactly what you would expect</mark></p>
</section>
<section id="are-we-done" class="slide level2">
<h2>Are we done?</h2>
<p><mark>Unfortunately, no</mark></p>
<div class="fragment">
<p>Most applied work with a multi-valued or continuous treatment wants to think about how causal responses vary across dose</p>
<ul>
<li><p>For example, plot treatment effects as a function of dose</p>
<ul>
<li>Does more dose tends to increase/decrease/not effect outcomes?</li>
</ul></li>
<li><p>Average causal response parameters <em>inherently</em> involve comparisons across slightly different doses</p></li>
</ul>
</div>
</section>
<section id="interpretation-issues" class="slide level2">
<h2>Interpretation Issues</h2>
<p>Consider comparing <span class="math inline">\(ATT(d|d)\)</span> for two different doses</p>
<div class="fragment">
<p><span class="math display">\[
\begin{aligned}
&amp; ATT(d_h|d_h) - ATT(d_l|d_l) \hspace{350pt}
\end{aligned}
\]</span></p>
</div>
</section>
<section id="interpretation-issues-1" class="slide level2" data-visibility="uncounted">
<h2>Interpretation Issues</h2>
<p>Consider comparing <span class="math inline">\(ATT(d|d)\)</span> for two different doses</p>
<p><span class="math display">\[
\begin{aligned}
&amp; ATT(d_h|d_h) - ATT(d_l|d_l) \hspace{350pt}\\
&amp; \hspace{25pt} = \underbrace{\E[Y_{t^*}(d_h) - Y_{t^*}(d_l) | D=d_h]}_{\textrm{Causal Response}} + \underbrace{ATT(d_l|d_h) - ATT(d_l|d_l)}_{\textrm{Selection Bias}}
\end{aligned}
\]</span></p>
<div class="fragment">
<p>“Standard” Parallel Trends is not strong enough to rule out the selection bias terms here</p>
<ul>
<li><p>Implication: If you want to interpret differences in treatment effects across different doses, then you will need stronger assumptions than standard parallel trends</p></li>
<li><p>This problem spills over into identifying <span class="math inline">\(ACRT(d|d)\)</span></p></li>
</ul>
</div>
<div class="fragment">
<p><span class="alert">Positive side-comment:</span> <span class="math inline">\(ATT(d_h|d_h) - ATT(d_l|d_l) = \E[\Delta Y_{t^*} | D=d_h] - \E[\Delta Y_{t^*} | D=d_l]\)</span> (which doesn’t involve the untreated group)</p>
</div>
</section>
<section id="interpretation-issues-2" class="slide level2">
<h2>Interpretation Issues</h2>
<p><span class="alert">Intuition: </span></p>
<ul>
<li><p>Difference-in-differences identification strategies result in <span class="math inline">\(ATT(d|d)\)</span> parameters. These are <span class="highlight">local parameters</span> and difficult to compare to each</p></li>
<li><p>This explanation is similar to thinking about LATEs with two different instruments</p></li>
<li><p>Thus, comparing <span class="math inline">\(ATT(d|d)\)</span> across different values is tricky and not for free</p></li>
</ul>
<div class="fragment">
<p><span class="alert">What can you do?</span></p>
<ul>
<li><p>One idea, just recover <span class="math inline">\(ATT(d|d)\)</span> and interpret it cautiously (interpret it by itself not relative to different values of <span class="math inline">\(d\)</span>)</p></li>
<li><p>If you want to compare them to each other, it will come with the cost of additional (structural) assumptions</p></li>
</ul>
</div>
</section>
<section id="introduce-stronger-assumptions" class="slide level2">
<h2>Introduce Stronger Assumptions</h2>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>“Strong” Parallel Trends Assumption</strong></p>
</div>
<div class="callout-content">
<p>For all doses <code>d</code> and <code>l</code>,</p>
<p><span class="math display">\[\mathbb{E}[Y_{t^*}(d) - Y_{t^*-1}(0) | D=l] = \mathbb{E}[Y_{t^*}(d) - Y_{t^*-1}(0) | D=d]\]</span></p>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li><p>This is notably different from “Standard” Parallel Trends</p></li>
<li><p>It involves potential outcomes for all values of the dose (not just untreated potential outcomes)</p></li>
<li><p>All dose groups would have experienced the same path of outcomes had they been assigned the same dose</p></li>
</ul>
</div>
</section>
<section id="introduce-stronger-assumptions-1" class="slide level2">
<h2>Introduce Stronger Assumptions</h2>
<p>Strong parallel trends implies a version of treatment effect homogeneity. Notice:</p>
<p><span class="math display">\[
\begin{aligned}
ATT(d|d) &amp;= \E[Y_{t^*}(d) - Y_{t^*}(0) | D=d] \hspace{200pt} \
\end{aligned}
\]</span></p>
</section>
<section id="introduce-stronger-assumptions-2" class="slide level2" data-visibility="uncounted">
<h2>Introduce Stronger Assumptions</h2>
<p>Strong parallel trends implies a version of treatment effect homogeneity. Notice:</p>
<p><span class="math display">\[
\begin{aligned}
ATT(d|d) &amp;= \E[Y_{t^*}(d) - Y_{t^*}(0) | D=d] \hspace{200pt} \\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=d] - \E[Y_{t^*}(0) - Y_{t^*-1}(0) | D=d] \
\end{aligned}
\]</span></p>
</section>
<section id="introduce-stronger-assumptions-3" class="slide level2" data-visibility="uncounted">
<h2>Introduce Stronger Assumptions</h2>
<p>Strong parallel trends implies a version of treatment effect homogeneity. Notice:</p>
<p><span class="math display">\[
\begin{aligned}
ATT(d|d) &amp;= \E[Y_{t^*}(d) - Y_{t^*}(0) | D=d] \hspace{200pt} \\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=d] - \E[Y_{t^*}(0) - Y_{t^*-1}(0) | D=d] \\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=l] - \E[Y_{t^*}(0) - Y_{t^*-1}(0) | D=l] \
\end{aligned}
\]</span></p>
</section>
<section id="introduce-stronger-assumptions-4" class="slide level2" data-visibility="uncounted">
<h2>Introduce Stronger Assumptions</h2>
<p>Strong parallel trends implies a version of treatment effect homogeneity. Notice:</p>
<p><span class="math display">\[
\begin{aligned}
ATT(d|d) &amp;= \E[Y_{t^*}(d) - Y_{t^*}(0) | D=d] \hspace{200pt} \\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=d] - \E[Y_{t^*}(0) - Y_{t^*-1}(0) | D=d] \\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*-1}(0) | D=l] - \E[Y_{t^*}(0) - Y_{t^*-1}(0) | D=l] \\\
&amp;= \E[Y_{t^*}(d) - Y_{t^*}(0) | D=l] = ATT(d|l)
\end{aligned}
\]</span></p>
<div class="fragment">
<p>Since this holds for all <span class="math inline">\(d\)</span> and <span class="math inline">\(l\)</span>, it also implies that <span class="math inline">\(ATT(d|d) = ATE(d) = \E[Y_{t^*}(d) - Y_{t^*}(0)]\)</span>. Thus, under strong parallel trends, we have that</p>
<p><span class="math display">\[ATE(d) = \E[\Delta Y_{t^*}|D=d] - \E[\Delta Y_{t^*}|D=0]\]</span></p>
<p>RHS is exactly the same expression as for <span class="math inline">\(ATT(d|d)\)</span> under “standard” parallel trends, but here</p>
<ul>
<li><p>assumptions are different</p></li>
<li><p>parameter interpretation is different</p></li>
</ul>
</div>
</section>
<section id="comparisons-across-dose" class="slide level2">
<h2>Comparisons across dose</h2>
<p>ATE-type parameters do not suffer from the same issues as ATT-type parameters when making comparisons across dose</p>
<div class="fragment">
<p><span class="math display">\[
\begin{aligned}
ATE(d_h) - ATE(d_l) &amp;= \E[Y_{t^*}(d_h) - Y_{t^*}(0)] - \E[Y_{t^*}(d_l) - Y_{t^*}(0)]
\end{aligned}
\]</span></p>
</div>
</section>
<section id="comparisons-across-dose-1" class="slide level2" data-visibility="uncounted">
<h2>Comparisons across dose</h2>
<p>ATE-type parameters do not suffer from the same issues as ATT-type parameters when making comparisons across dose</p>
<p><span class="math display">\[
\begin{aligned}
ATE(d_h) - ATE(d_l) &amp;= \E[Y_{t^*}(d_h) - Y_{t^*}(0)] - \E[Y_{t^*}(d_l) - Y_{t^*}(0)]\\
&amp;= \underbrace{\E[Y_{t^*}(d_h) - Y_{t^*}(d_l)]}_{\textrm{Causal Response}}
\end{aligned}
\]</span></p>
<div class="fragment">
<p><mark>Thus, recovering <span class="math inline">\(ATE(d)\)</span> side-steps the issues about comparing treatment effects across doses, but it comes at the cost of needing a (potentially very strong) extra assumption</mark></p>
</div>
<div class="fragment">
<p>Given that we can compare <span class="math inline">\(ATE(d)\)</span>’s across dose, we can recover slope effects in this setting</p>
<p><span class="math display">\[
\begin{aligned}
  ACR(d) := \frac{\partial ATE(d)}{\partial d} \qquad &amp;\textrm{or} \qquad ACR^O := \E[ACR(D) | D&gt;0]
\end{aligned}
\]</span></p>
</div>
</section>
<section id="twfe-regressions-in-this-context" class="slide level2">
<h2>TWFE Regressions in this Context</h2>
<p>Consider the same TWFE regression (but now <span class="math inline">\(D_{it}\)</span> is continuous): <span class="math display">\[\begin{align*}
  Y_{it} = \theta_t + \eta_i + \alpha D_{it} + e_{it}
\end{align*}\]</span> You can show that <span class="math display">\[\begin{align*}
  \alpha = \int_{\mathcal{D}_+} w(l) m'_\Delta(l) \, dl
\end{align*}\]</span> where <span class="math inline">\(m_\Delta(l) := \E[\Delta Y_{t^*}|D=l] - \E[\Delta Y_{t^*}|D=0]\)</span> and <span class="math inline">\(w(l)\)</span> are weights</p>
<div class="fragment">
<ul>
<li><p>Under standard parallel trends, <span class="math inline">\(m'_{\Delta}(l) = ACRT(l|l) + \textrm{local selection bias}\)</span></p></li>
<li><p>Under strong parallel trends, <span class="math inline">\(m'_{\Delta}(l) = ACR(l)\)</span>.</p></li>
</ul>
<p>Thus, issues related to selection bias continue to show up here</p>
</div>
<div class="fragment">
<p>About the weights: they are all positive, but have some strange properties (e.g., always maximized at <span class="math inline">\(l = \E[D]\)</span> (even if this is not a common value for the dose))</p>
<ul>
<li><span class="math inline">\(\implies\)</span> even under strong parallel trends, <span class="math inline">\(\alpha \neq ACR^O\)</span>.</li>
</ul>
</div>
</section>
<section id="twfe-regressions-in-this-context-1" class="slide level2">
<h2>TWFE Regressions in this Context</h2>
<p>Other issues can arise in more complicated cases</p>
<ul>
<li><p>For example, suppose you have a staggered continuous treatment, then you will <em>additionally</em> get issues that are analogous to the ones we discussed earlier for a binary staggered treatment</p></li>
<li><p>In general, things get worse for TWFE regressions with more complications</p></li>
</ul>
</section>
<section id="summarizing" class="slide level2">
<h2>Summarizing</h2>
<ul>
<li>It is straightforward/familiar to identify ATT-type parameters with a multi-valued or continuous dose</li>
</ul>
<div class="fragment">
<ul>
<li>However, comparison of ATT-type parameters across different doses are hard to interpret
<ul>
<li>They include selection bias terms</li>
<li>This issues extends to identifying ACRT parameters</li>
<li>These issues extend to TWFE regressions</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>This suggests targeting ATE-type parameters
<ul>
<li>Comparisons across doses do not contain selection bias terms</li>
<li>But identifying ATE-type parameters requires stronger assumptions</li>
<li>[<a href="#/weaken-spt">Ideas for weakening strong parallel trends</a>]</li>
</ul></li>
</ul>
</div>
</section>
<section id="example-2-units-can-move-in-and-out-of-the-treatment" class="slide level2">
<h2>Example 2: Units can move in and out of the treatment</h2>
<p>“Scarring” vs.&nbsp;Moving in and out of treatment</p>
<p><span class="alert">Example treatments: </span></p>
<ul>
<li><p>Union status (Vella and Verbeek, 1998)</p></li>
<li><p>Whether or not location hit by hurricane (Deryugina, 2017)</p></li>
<li><p>Whether or not a district shares the same ethnicity as the president of the country (Burgess, et al., 2015)</p></li>
</ul>
<div class="fragment">
<p><span class="alert">Additional Notation: </span></p>
<p>We can make a lot of progress by redefining our notion of a “group”</p>
<ul>
<li><p>Keep track of entire treatment regime <span class="math inline">\(\mathbf{D}_i := (D_{i1}, \ldots, D_{i\mathcal{T}})'\)</span> and/or treatment history up to period <span class="math inline">\(t\)</span>: <span class="math inline">\(\mathbf{D}_{it} := (D_{i1}, \ldots, D_{it})'\)</span>.</p></li>
<li><p>Potential outcomes <span class="math inline">\(Y_{it}(\mathbf{d}_t)\)</span> where <span class="math inline">\(\mathbf{d}_t\)</span> is some treatment history up to period <span class="math inline">\(t\)</span> (this notation imposes “no anticipation” — potential outcomes do not depend on future treatments). Observed outcomes: <span class="math inline">\(Y_{it}(\mathbf{D}_{it})\)</span></p></li>
</ul>
</div>
</section>
<section id="example-2-units-can-move-in-and-out-of-the-treatment-1" class="slide level2">
<h2>Example 2: Units can move in and out of the treatment</h2>
<p><span class="alert">A little more notation…</span></p>
<ul>
<li><p><span class="math inline">\(\mathcal{D}_t \subseteq \{0,1\}^t\)</span> is the set of all possible treatment histories in period <span class="math inline">\(t\)</span>. As earlier, we will exclude units that are treated in the first period, (I’ll briefly come back to this later)</p></li>
<li><p><span class="math inline">\(\mathbf{0}_t\)</span> denotes not participating in the treatment in any period up to period <span class="math inline">\(t\)</span></p></li>
</ul>
<div class="fragment">
<p>In this case, we’ll define groups by their treatment histories <span class="math inline">\(\mathbf{d}_t\)</span>. Thus, we can consider group-time average treatment effects defined by <span class="math display">\[\begin{align*}
  ATT(\mathbf{d}_t, t) := \E[Y_{it}(\mathbf{d}_t) - Y_{it}(\mathbf{0}_t) | \mathbf{D}_{it} = \mathbf{d}_t]
\end{align*}\]</span></p>
</div>
</section>
<section id="example-2-units-can-move-in-and-out-of-the-treatment-2" class="slide level2">
<h2>Example 2: Units can move in and out of the treatment</h2>
<p><span class="alert">Parallel Trends Assumption:</span> For all <span class="math inline">\(t=2,\ldots,\mathcal{T}\)</span>, and for all <span class="math inline">\(\mathbf{d}_t \in \mathcal{D}_t\)</span>, <span class="math display">\[\begin{align*}
  \E[\Delta Y_{it}(\mathbf{0}_t) | \mathbf{D}_{it} = \mathbf{d}_t] = \E[\Delta Y_{it}(\mathbf{0}_t) | \mathbf{D}_{it} = \mathbf{0}_t]
\end{align*}\]</span></p>
<div class="fragment">
<p><span class="alert">Identification: </span> In this setting, under the parallel trends assumption, we have that <span class="math display">\[\begin{align*}
  ATT(\mathbf{d}_t, t) = \E[Y_{it} - Y_{i1} | \mathbf{D}_{it} = \mathbf{d}_t] - \E[Y_{it} - Y_{i1} | \mathbf{D}_{it} = \mathbf{0}_t]
\end{align*}\]</span></p>
</div>
<div class="fragment">
<p>This argument is straightforward and analogous to what we have done before. <span class="highlight">However…</span></p>
</div>
</section>
<section id="example-2-units-can-move-in-and-out-of-the-treatment-3" class="slide level2">
<h2>Example 2: Units can move in and out of the treatment</h2>
<p>There are a number of additional complications that arise here.</p>
<ol type="1">
<li><p>There are way more possible groups here than in the staggered treatment case (you can think of this as leading to a kind of curse of dimensionality)</p>
<ul>
<li><p><span class="math inline">\(\implies\)</span> small groups <span class="math inline">\(\implies\)</span> imprecise estimates and (possibly) invalid inferences</p></li>
<li><p>also makes it harder to report the results</p></li>
</ul></li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li><p>The previous point provides an additional reason to try to aggregate the group-time average treatment effects. However, this is also not so straightforward.</p>
<ul>
<li><p>This is an area of active research (e.g., de Chaisemartin and d’Haultfoeuille (2023) and Yanagi (2023))</p></li>
<li><p>Some ideas below…but the literature has not converged here yet</p></li>
</ul></li>
</ol>
</div>
</section>
<section id="example-2-units-can-move-in-and-out-of-the-treatment-4" class="slide level2">
<h2>Example 2: Units can move in and out of the treatment</h2>
<p>Probably the simplest approach is to just make groups on the basis of the first period when a unit experiences the treatment</p>
<ul>
<li><p>We have (kind of) been doing this in our minimum wage application</p></li>
<li><p>Lots of papers (e.g., job displacement, hospitalization) have used this idea</p></li>
<li><p>Formally, it amounts to averaging over all subsequent treatments decisions (de Chaisemartin and d’Haultfoeuille (2023))</p></li>
</ul>
<div class="fragment">
<p>But there are other ideas too. Suppose that you were interested in the average treatment effect of experiencing some cumulative number of treatment effects over time (e.g., how many years someone was in a union).</p>
</div>
</section>
<section id="example-2-units-can-move-in-and-out-of-the-treatment-5" class="slide level2">
<h2>Example 2: Units can move in and out of the treatment</h2>
<p>Define <span class="math inline">\(\sigma_t(\mathbf{d}_t) := \displaystyle \sum_{s=1}^t d_s\)</span> — <span class="math inline">\(\sigma_t(\cdot)\)</span> is a function that adds up the cumulative number of treatments up to period <span class="math inline">\(t\)</span> for treatment history <span class="math inline">\(\mathbf{d}_t\)</span>.</p>
<div class="fragment">
<p>We will target the average treatment effect of having experienced exactly <span class="math inline">\(\sigma\)</span> treatments by period <span class="math inline">\(t\)</span>.</p>
</div>
<div class="fragment">
<p>Towards this end, also define <span class="math inline">\(\mathcal{D}_t^\sigma = \{\mathbf{d}_t \in \mathcal{D}_t : \sigma_t(\mathbf{d}_t) = \sigma\}\)</span> — this is the set of treatment histories that result in <span class="math inline">\(\sigma\)</span> cumulative treatments in period <span class="math inline">\(t\)</span>. Then, consider</p>
</div>
<div class="fragment">
<p><span class="math display">\[\begin{align*}
  ATT^{sum}(\sigma, t) = \sum_{\mathbf{d}_t \in \mathcal{D}_t^\sigma} ATT(\mathbf{d}_t, t) \P(D_{it}=\mathbf{d}_t | \mathbf{D}_{it} \in \mathcal{D}_t^\sigma)
\end{align*}\]</span></p>
</div>
<div class="fragment">
<p>This is the average <span class="math inline">\(ATT(\mathbf{d}_t,t)\)</span> across treatment regimes that lead to exactly <span class="math inline">\(\sigma\)</span> treatments by period <span class="math inline">\(t\)</span></p>
<p>Similar to previous cases, <span class="math inline">\(ATT^{sum}(\sigma,t)\)</span> is a weighted average of underlying 2x2 DID parameters</p>
<p>Averaging like this reduces the number of groups, and makes the estimation problem discussed above easier (the “effective” number of units is larger)</p>
</div>
</section>
<section id="example-2-units-can-move-in-and-out-of-the-treatment-6" class="slide level2">
<h2>Example 2: Units can move in and out of the treatment</h2>
<p>Even though <span class="math inline">\(ATT^{sum}(\sigma,t)\)</span> (possibly substantially) reduces the dimensionality of the underlying group-time average treatment effect parameters, we might want to reduce more.</p>
<div class="fragment">
<p>This is tricky though because the composition of the effective groups changes over time (just because you have two groups have the same number of cumulative treatments in one period doesn’t mean that they have the same number in subsequent periods)</p>
</div>
</section>
<section id="example-2-units-can-move-in-and-out-of-the-treatment-7" class="slide level2">
<h2>Example 2: Units can move in and out of the treatment</h2>
<p>An alternative idea is to just report treatment effect parameters in the last period: <span class="math inline">\(ATT^{sum}(\sigma,\mathcal{T})\)</span> as a function of <span class="math inline">\(\sigma\)</span>.</p>
<ul>
<li>This would be something that you could report in a two-dimensional plot</li>
</ul>
<div class="fragment">
<p>Unlike the staggered treatment adoption case, where <span class="math inline">\(ATT^{ES}(e)\)</span> and <span class="math inline">\(ATT^O\)</span> seem like good default parameters to report, it is not clear to me what (or if there is) a good default choice here.</p>
<ul>
<li>However, if I were writing a paper, I would (i) show disaggregated results, (ii) argue for some particular aggregated parameter and choose weights on the disaggregated parameters that target this parameter</li>
</ul>
</div>
<div class="fragment">
<p>Another caution is that (I presume) the issues about interpreting <span class="math inline">\(ATT\)</span>-type parameters across different amounts of the treatment (here across <span class="math inline">\(\sigma\)</span>) will introduce selection bias terms except under additional assumptions</p>
<ul>
<li>e.g., saying that, on average participating in a union for 10 years increased earnings by some amount and participating in a union for for 5 years increased by another amount is one thing; causally attributing the difference to “longer union participation” (probably) takes more assumptions</li>
</ul>
</div>
</section>
<section id="extensions" class="slide level2">
<h2>Extensions</h2>
<p>Notice that above, we only invoked parallel trends with respect to untreated potential outcomes.</p>
<div class="fragment">
<p>But it seems within the spirit of DID to assume parallel trends for <em>staying</em> at the same treatment over time</p>
<ul>
<li><p>Then we can recover group-time average treatment effects for switchers relative to stayers</p></li>
<li><p>See de Chaisemartin et al.&nbsp;(2022) and de Chaisemartin and d’Haultfoeuille (2023) for approaches along these lines</p></li>
</ul>
</div>
<div class="fragment">
<p>This results in <em>many</em> more disaggregated treatment effect parameters</p>
<p>[<a href="#/stayers">Details</a>]</p>
</div>
</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<p>We’ve covered a number of different settings, but we certainly haven’t covered all of them</p>
<ul>
<li><p>Ex. Suppose you have a multi-valued treatment that can change values over time</p></li>
<li><p>I’m not sure what exactly to do off the top of my head (and the exact thing to do likely depends on the particular goals of the application), but I think that you can get some ideas from extrapolating our discussion:</p>
<ul>
<li>Step 1: Target disaggregated parameters</li>
<li>Step 2: If desired, choose aggregated target parameter suitable to the application, combine underlying disaggregateed parameters directly to recover this parameter</li>
</ul></li>
</ul>
</section>
<section id="ideas-for-weakening-strong-parallel-trends" class="slide level2">
<h2>Ideas for Weakening Strong Parallel Trends</h2>
<p><span class="alert">Idea 1: Partial Identification</span> In some application, it may seem reasonable to think that you know the sign of the selection bias. If this “works against” the sign of differences in <span class="math inline">\(m_\Delta(d)\)</span> as <span class="math inline">\(d\)</span> increases, this implies that you could still sign differences in <span class="math inline">\(ATT(d|d)\)</span> as <span class="math inline">\(d\)</span> increases</p>
<div class="fragment">
<p><span class="alert">Idea 2: Strong PT Conditional on Covariate</span> It might be reasonable to assume strong parallel trends conditional on some other variable.</p>
<ul>
<li>Example: For the minimum wage, it might be reasonable to assume that strong parallel trends holds across states within the same region of the country (say, West or South)
<ul>
<li>Evidence in favor of this is much different distributions of MW policy across regions</li>
<li>Wouldn’t be able to make “full” comparison across all doses here, but could learn about employment effects of a $15.75 MW (Washington) relative to $13.20 (Oregon).</li>
</ul></li>
</ul>
<p>[<a href="#/summarize">Back</a>]</p>
</div>
</section>
<section id="did-using-stayers-and-switchers" class="slide level2">
<h2>DID using Stayers and Switchers</h2>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Parallel Trends Assumption for Stayers</strong></p>
</div>
<div class="callout-content">
<p>For any treatment history <span class="math inline">\(\mathbf{d}_{t-1}\)</span>,</p>
<p><span class="math display">\[\begin{align*}
    \E[Y_t(d_{t-1},\mathbf{d}_{t-1}) - Y_{t-1}(\mathbf{d}_{t-1}) | \mathbf{D}_{it-1} = \mathbf{d}_{t-1})] = \E[Y_t(d_{t-1},\mathbf{d}_{t-1}) - Y_{t-1}(\mathbf{d}_{t-1}) | \mathbf{D}_{it} = (d_{t-1},\mathbf{d}_{t-1})]
\end{align*}\]</span></p>
</div>
</div>
</div>
<div class="fragment">
<p>In this case, you can recover the <span class="math inline">\(ATT\)</span> for <span class="alert">switchers</span>: (here we are supposing that <span class="math inline">\(d_{t-1}=0\)</span>, but can make an analogous argument in the opposite case) <span class="math display">\[\begin{align*}
  ATT^{switchers}(\mathbf{d}_{t-1},t) &amp;= \E[Y_{it}(1,\mathbf{d}_{t-1}) - Y_{it}(0,\mathbf{d}_{t-1}) | \mathbf{D}_{it} = (1,\mathbf{d}_{t-1})] \\
  &amp;\overset{\textrm{PTA}}{=} \E[\Delta Y_{it} | \mathbf{D}_{it}=(1,\mathbf{d}_{t-1})] - \E[\Delta Y_{it} | \mathbf{D}_{it}=(0,\mathbf{d}_{t-1})]
\end{align*}\]</span> That is, you can recover <span class="math inline">\(ATT^{switchers}\)</span> by comparing the paths of outcomes for switchers to the path of outcomes for stayers (exactly what you’d expect!)</p>
</div>
<div class="fragment">
<p>Given this sort of assumption, there may be a huge number of <span class="math inline">\(ATT^{switchers}(\mathbf{d}_{t-1},t)\)</span> in realistic applications.</p>
<ul>
<li><p>You could use these to further understand treatment effect heterogeneity</p></li>
<li><p>You could also propose some way to aggregate them into a lower dimensional argument</p></li>
</ul>
<p>[<a href="#/extensions">Back</a>]</p>
</div>
<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="More-Complicated-Treatment-Regimes_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>