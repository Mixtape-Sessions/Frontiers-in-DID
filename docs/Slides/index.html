<!DOCTYPE html>
<html lang="en"><head>
<script src="DID-Introduction_files/libs/clipboard/clipboard.min.js"></script>
<script src="DID-Introduction_files/libs/quarto-html/tabby.min.js"></script>
<script src="DID-Introduction_files/libs/quarto-html/popper.min.js"></script>
<script src="DID-Introduction_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="DID-Introduction_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="DID-Introduction_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="DID-Introduction_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="DID-Introduction_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.353">

  <meta name="author" content="Brantly Callaway">
  <meta name="dcterms.date" content="2023-10-17">
  <title>Frontiers in Difference-in-Differences</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="DID-Introduction_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="DID-Introduction_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="DID-Introduction_files/libs/revealjs/dist/theme/quarto.css">
  <link href="DID-Introduction_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="DID-Introduction_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="DID-Introduction_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="DID-Introduction_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  
  <script src="DID-Introduction_files/libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="DID-Introduction_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Frontiers in Difference-in-Differences</h1>
  <p class="subtitle">Introduction to Panel Data Approaches to Causal Inference</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Brantly Callaway 
</div>
</div>
</div>

  <p class="date">October 17, 2023</p>
</section>
<section id="introduction" class="slide level2">
<h2>Introduction</h2>
<p><span class="math inline">\(\newcommand{\E}{\mathbb{E}} \newcommand{\E}{\mathbb{E}} \newcommand{\var}{\mathrm{var}} \newcommand{\cov}{\mathrm{cov}} \newcommand{\Var}{\mathrm{var}} \newcommand{\Cov}{\mathrm{cov}} \newcommand{\Corr}{\mathrm{corr}} \newcommand{\corr}{\mathrm{corr}} \newcommand{\L}{\mathrm{L}} \renewcommand{\P}{\mathrm{P}} \newcommand{\independent}{{\perp\!\!\!\perp}} \newcommand{\indicator}[1]{ \mathbf{1}\{#1\} }\)</span> Panel data gives researchers the opportunity to follow the same person, firm, location, etc. over multiple time periods</p>
<div class="fragment">
<p>Having this sort of data seems fundamentally useful for learning about causal effects of some treatment/policy variable.</p>
</div>
<div class="fragment">
<p>To see this, the <span class="alert">fundamental problem of causal inference</span> is that we can either see a unit’s treated or untreated potential outcomes (but not both)</p>
</div>
<div class="fragment">
<p>However, with panel data, this is not 100% true. In some cases, we can see both a unit’s treated and untreated potential outcome outcome…just at different points in time</p>
<ul>
<li>Example: 2 time periods, a unit is untreated in the first period but becomes treated in the second period</li>
</ul>
</div>
<div class="fragment">
<p>This seems extremely useful for learning about causal effects</p>
</div>
</section>
<section id="introduction-1" class="slide level2">
<h2>Introduction</h2>
<p>Panel data approaches are also extremely common in empirical work</p>
<ul>
<li>Currie, Kleven, and Zwiers (AER P&amp;P, 2020): 25% of NBER working papers in applied micro use difference-in-differences (i.e., a subset of panel data approaches to causal inference)</li>
</ul>
<div class="fragment">
<p>Some of this is likely due to the reasons mentioned above, but (at least as importantly) its popularity is due to wide availability of panel data</p>
<p><span class="alert-blue">References: </span></p>
<ul>
<li><p>Callaway (2023, <em>Handbook of Labor, Human Resources and Population Economics</em>)</p></li>
<li><p>Baker, Callaway, Cunningham, Goodman-Bacon, Sant’Anna (2023, draft posted very soon)</p></li>
</ul>
</div>
</section>
<section id="setup" class="slide level2">
<h2>Setup</h2>
<p><span class="alert">Setting: Exploit a data structure where the researcher observes:</span></p>
<ol type="1">
<li><p>Multiple periods of data</p></li>
<li><p>Some pre-treatment data for all units</p></li>
<li><p>Some units become treated while other units remain untreated</p></li>
</ol>
<div class="fragment">
<p>(In my view) this particular data setup is a key distinguishing feature of the approaches that we’ll mainly talk about today relative to traditional panel data models (i.e., fixed effects, dynamic panel, etc.)</p>
<ul>
<li>This setup also explains why the methods we consider today are often grouped among “natural experiment” types of methods such as IV or RD.</li>
</ul>
</div>
<div class="fragment">
<p><span class="alert-blue">Running Examples:</span></p>
<ul>
<li><p>Causal effects of a state-level minimum wage increase on employment</p></li>
<li><p>Causal effects of job displacement</p></li>
</ul>
</div>
</section>
<section id="setup-1" class="slide level2">
<h2>Setup</h2>
<p>Modern approaches also typically allow for <span class="alert">treatment effect heterogeneity</span></p>
<ul>
<li>That is, that effects of the treatment can vary across different units in potentially complicated ways</li>
</ul>
<p>This is going to be a major issue in the discussion below</p>
<p>We’ll consider implications for various estimation strategies as well as for “traditional” regression approaches</p>
<aside class="notes">
<p>TE heterogeneity is the main cause of the issues with TWFE regressions that have been emphasized in recent work on DID</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="outline-of-the-course" class="slide level2">
<h2>Outline of the Course</h2>
<p><br></p>
<p><br></p>
<ol type="1">
<li>Introduction to Difference-in-Differences
<ul>
<li>(Brief) Review of Textbook 2 Period Case</li>
<li>(Brief) Review of Staggered Treatment Adoption</li>
<li>(Brief) Review of Issues with TWFE Regressions</li>
<li>Application/Code for Minimum Wage Policy</li>
</ul></li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li>Relaxing the Parallel Trends Assumption by Including Covariates</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>Dealing with More Complicated Treatment Regimes</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li>Alternative Identification Strategies</li>
</ol>
</div>
</section>
<section>
<section id="introduction-to-difference-in-differences" class="title-slide slide level1 center" data-visibility="uncounted">
<h1>Introduction to Difference-in-Differences</h1>
<!--

## Overview of Different Approaches to Causal Inference with Panel Data

<span class="alert">Types of Panel Data Approaches to Causal Inference:</span>

* Difference-in-differences

* Unconfoundedness conditional on lagged outcomes

* Unit-specific linear trends

* Interactive fixed effects 

* Change-in-changes

* Triple differences

* Others...

-->
</section>
<section id="difference-in-differences" class="slide level2">
<h2>Difference-in-differences</h2>
<p>There have been a number of notable advances in recent years on panel data approaches to causal inference.</p>
<ul>
<li><p>Many of these have been in the context of differences-in-differences <span class="math inline">\(\implies\)</span> this is a natural starting point for us</p></li>
<li><p>That said, a number of the insights in this literature extend to other identification strategies</p>
<ul>
<li>We will return to these issues on Thursday</li>
</ul></li>
</ul>
</section>
<section id="the-logic-of-did" class="slide level2">
<h2>The Logic of DID</h2>
<p><span class="alert-blue">Intuition for DID identification strategy</span> is to compare:</p>
<ul>
<li><p>The change in outcomes over time for units that participate in the treatment to</p></li>
<li><p>The change in outcomes over time for units that didn’t participate in the treatment</p></li>
</ul>
<div class="fragment">
<p>Rough explanation: Compares a treated unit’s outcomes to its past outcomes while making adjustment for <span class="alert">common shocks</span> using the comparison group.</p>
</div>
</section>
<section id="textbook-case-with-two-periods" class="slide level2">
<h2>Textbook Case with Two Periods</h2>
<p><span class="alert">Data: </span></p>
<ul>
<li>2 periods: <span class="math inline">\(t^*\)</span>, <span class="math inline">\(t^*-1\)</span>
<ul>
<li>No one treated until period <span class="math inline">\(t^*\)</span></li>
<li>Some units remain untreated in period <span class="math inline">\(t^*\)</span></li>
</ul></li>
<li>2 groups: <span class="math inline">\(D_i=1\)</span> or <span class="math inline">\(D_i=0\)</span> (treated and untreated)</li>
</ul>
<div class="fragment">
<p><span class="alert">Potential Outcomes: </span> <span class="math inline">\(Y_{it}(1)\)</span> and <span class="math inline">\(Y_{it}(0)\)</span></p>
</div>
<div class="fragment">
<p><span class="alert">Observed Outcomes: </span> <span class="math inline">\(Y_{it^*}\)</span> and <span class="math inline">\(Y_{it^*-1}\)</span></p>
<p><span class="math display">\[\begin{align*}
  Y_{it^*} = D_i Y_{it^*}(1) +(1-D_i)Y_{it^*}(0) \quad \textrm{and} \quad Y_{it^*-1} = Y_{it^*-1}(0)
\end{align*}\]</span></p>
</div>
</section>
<section id="target-parameter" class="slide level2">
<h2>Target Parameter</h2>
<p><span class="alert">Average Treatment Effect on the Treated: </span> <span class="math display">\[ATT = \E[Y_{t^*}(1) - Y_{t^*}(0) | D=1]\]</span></p>
<p>Explanation: Mean difference between treated and untreated potential outcomes in the second period among the treated group</p>
</section>
<section id="did-with-two-periods" class="slide level2">
<h2>DID with Two Periods</h2>
<p><br></p>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Parallel Trends Assumption</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[\E[\Delta Y_{t^*}(0) | D=1] = \E[\Delta Y_{t^*}(0) | D=0]\]</span></p>
</div>
</div>
</div>
<p><br></p>
<p>Explanation: Mean path of untreated potential outcomes is the same for the treated group as for the untreated group</p>
<div class="fragment">
<p><span class="alert">Identification: </span>Under PTA, we can identify <span class="math inline">\(ATT\)</span>: <span class="math display">\[
\begin{aligned}
ATT &amp;= \E[\Delta Y_{t^*} | D=1] - \E[\Delta Y_{t^*}(0) | D=1]
\end{aligned}
\]</span></p>
</div>
</section>
<section id="did-with-two-periods-1" class="slide level2" data-visibility="uncounted">
<h2>DID with Two Periods</h2>
<p><br></p>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Parallel Trends Assumption</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[\E[\Delta Y_{t^*}(0) | D=1] = \E[\Delta Y_{t^*}(0) | D=0]\]</span></p>
</div>
</div>
</div>
<p><br></p>
<p>Explanation: Mean path of untreated potential outcomes is the same for the treated group as for the untreated group</p>
<p><span class="alert">Identification: </span>Under PTA, we can identify <span class="math inline">\(ATT\)</span>: <span class="math display">\[
\begin{aligned}
ATT &amp;= \E[\Delta Y_{t^*} | D=1] - \E[\Delta Y_{t^*}(0) | D=1]\\
&amp;= \E[\Delta Y_{t^*} | D=1] - \E[\Delta Y_{t^*} | D=0]
\end{aligned}
\]</span></p>
<div class="fragment">
<p><span class="math inline">\(\implies ATT\)</span> is identified can be recovered by the difference in outcomes over time (difference 1) relative to the difference in outcomes over time for the untreated group (difference 2)</p>
</div>
</section>
<section id="estimation" class="slide level2">
<h2>Estimation</h2>
<p>The most straightforward approach to estimation is plugin:</p>
<p><span class="math display">\[\widehat{ATT} = \frac{1}{n_1} \sum_{i=1}^n D_i \Delta Y_{it^*} - \frac{1}{n_0} \sum_{i=1}^n (1-D_i) \Delta Y_{it^*}\]</span></p>
<div class="fragment">
<p>Alternatively, <span class="alert-blue">TWFE regression:</span> <span class="math display">\[Y_{it} = \theta_t + \eta_i + \alpha D_{it} + e_{it}\]</span></p>
</div>
<div class="fragment">
<ul>
<li>Even though it looks like this model has restricted the effect of participating in the treatment to be constant (and equal to <span class="math inline">\(\alpha\)</span>) across all individuals, TWFE (in this case) is actually <span class="alert">robust</span> to treatment effect heterogeneity.</li>
</ul>
<aside class="notes">
<ul>
<li><p>This robustness is a notable (and very good) property for the TWFE regression</p></li>
<li><p>It is emphasized in MHE</p></li>
<li><p>The regression is also very convenient — we can estimate ATT, recover standard errors, conduct inference, all in one step</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<ul>
<li>To see this, notice that (with two periods) the previous regression is equivalent to <span class="math display">\[\begin{align*}
\Delta Y_{it} = \Delta \theta_t + \alpha \Delta D_{it} + \Delta e_{it}
\end{align*}\]</span> This is fully saturated in <span class="math inline">\(\Delta D_{it}\)</span> (which is binary) <span class="math inline">\(\implies\)</span> <span class="math display">\[\begin{align*}
\alpha = \E[\Delta Y_{it}|D_{it}=1] - \E[\Delta Y_{it}|D=0] = ATT
\end{align*}\]</span></li>
</ul>
</div>
</section>
<section id="twfe-regression" class="slide level2">
<h2>TWFE Regression</h2>
<p>It’s easy to make the TWFE regression more complicated:</p>
<ul>
<li><p>Multiple time periods</p></li>
<li><p>Variation in treatment timing</p></li>
<li><p>More complicated treatments</p></li>
<li><p>Introducing additional covariates</p></li>
</ul>
<p>Unfortunately, the robustness of TWFE regressions to treatment effect heterogeneity or these more complicated (and empirically relevant) settings does not seem to hold</p>
<div class="fragment">
<ul>
<li>Much of the recent (mostly negative) literature on TWFE in the context of DID has considered these types of “realistic” settings</li>
</ul>
</div>
</section>
<section id="more-complicated-treatment-regimes" class="slide level2">
<h2>More Complicated Treatment Regimes</h2>
<p>The arguments above are fairly easy and well-known.</p>
<div class="fragment">
<p>Most applications, however, involve more complicated settings (more periods, more complicated treatment regimes, etc.)</p>
</div>
<div class="fragment">
<p>One of the most active areas in causal inference with panel data in the past few years has been to these more “realistic” settings</p>
</div>
<div class="fragment">
<p>The first more complicated treatment regime that we’ll discuss is <span class="alert">staggered treatment adoption</span></p>
</div>
<div class="fragment">
<ul>
<li><p>This has been covered at length in many other places (e.g., other Mixtape sessions and Callaway (2023))</p></li>
<li><p>On Thursday, we will consider other (still more complicated) treatment regimes</p></li>
</ul>
</div>
</section>
<section id="setup-w-staggered-treatment-adoption" class="slide level2">
<h2>Setup w/ Staggered Treatment Adoption</h2>
<p><span class="math inline">\(\mathcal{T}\)</span> time periods</p>
<p><span class="alert-blue">Staggered treatment adoption:</span> Units can become treated at different points in time, but once a unit becomes treated, it remains treated.</p>
<div class="fragment">
<ul>
<li><span class="math inline">\(D_{it}\)</span> — treatment indicator.
<ul>
<li>In math, staggered treatment adoption means: <span class="math inline">\(D_{it-1}=1 \implies D_{it}=1\)</span>.</li>
</ul></li>
<li><span class="math inline">\(G_i\)</span> — a unit’s <span class="alert-blue">group</span> — the time period that unit becomes treated.
<ul>
<li>Under staggered treatment adoption, fully summarizes a unit’s treatment regime</li>
</ul></li>
<li>Define <span class="math inline">\(U_i=1\)</span> for never-treated units and <span class="math inline">\(U_i=0\)</span> otherwise.</li>
</ul>
</div>
<div class="fragment">
<p><span class="alert">Examples:</span></p>
<ul>
<li><p>Government policies that roll out in different locations at different times (minimum wage is close to this over short time horizons)</p></li>
<li><p>“Scarring” treatments: e.g., job displacement does not typically happen year after year, but rather labor economists think of being displaced as changing a person’s “state” (the treatment is more like: has a person ever been displaced)</p></li>
</ul>
</div>
</section>
<section id="setup-w-staggered-treatment-adoption-1" class="slide level2">
<h2>Setup w/ Staggered Treatment Adoption</h2>
<ul>
<li>Potential outcomes: <span class="math inline">\(Y_{it}(g)\)</span> — the outcome that unit <span class="math inline">\(i\)</span> would experience in time period <span class="math inline">\(t\)</span> if they became treated in period <span class="math inline">\(g\)</span>.</li>
</ul>
<div class="fragment">
<ul>
<li>Untreated potential outcome: <span class="math inline">\(Y_{it}(0)\)</span> — the outcome unit <span class="math inline">\(i\)</span> would experience in time period <span class="math inline">\(t\)</span> if they did not participate in the treatment in any period.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Observed outcome: <span class="math inline">\(Y_{it}=Y_{it}(G_i)\)</span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>No anticipation condition: <span class="math inline">\(Y_{it} = Y_{it}(0)\)</span> for all <span class="math inline">\(t &lt; G_i\)</span> (pre-treatment periods for unit <span class="math inline">\(i\)</span>)</li>
</ul>
</div>
</section>
<section id="unit-level-treatment-effects" class="slide level2">
<h2>Unit-Level Treatment Effects</h2>
<p><span class="alert">Unit-level treatment effect</span> <span class="math display">\[\tau_{it}(g) = Y_{it}(g) - Y_{it}(0)\]</span></p>
<div class="fragment">
<p><span class="alert">Average treatment effect for unit <span class="math inline">\(i\)</span></span> (across time periods): <span class="math display">\[\bar{\tau}_i(g) = \frac{1}{\mathcal{T} - g + 1} \sum_{t=g}^{\mathcal{T}} \tau_{it}(g)\]</span></p>
</div>
</section>
<section id="target-parameters" class="slide level2">
<h2>Target Parameters</h2>
<ul>
<li><span class="alert">Group-time average treatment effects</span> <span class="math display">\[\begin{align*}
ATT(g,t) = \E[ \tau_{it}(G) | G=g] = \E[Y_{t}(g) - Y_{t}(0) | G=g]
\end{align*}\]</span> Explanation: <span class="math inline">\(ATT\)</span> for group <span class="math inline">\(g\)</span> in time period <span class="math inline">\(t\)</span></li>
</ul>
<div class="fragment">
<ul>
<li><p><span class="alert">Event Study</span> <span class="math display">\[\begin{align*}
ATT^{ES}(e) = \E[\tau_{i,g+e}(G) | G \in \mathcal{G}_e]
\end{align*}\]</span> where <span class="math inline">\(\mathcal{G}_e\)</span> is the set of groups observed to have experienced the treatment for <span class="math inline">\(e\)</span> periods at some point.</p>
<p>Explanation: <span class="math inline">\(ATT\)</span> when units have been treated for <span class="math inline">\(e\)</span> periods</p></li>
</ul>
<!--In math: $\mathcal{G}_e = \{g : (g+e) \in [2,T] \textrm{ and } g > 0\}$-->
</div>
<div class="fragment">
<ul>
<li><span class="alert">Overall ATT</span> <span class="math display">\[\begin{align*}
ATT^O = \E[\bar{\tau}_i(G) | U=0]
\end{align*}\]</span> Explanation: <span class="math inline">\(ATT\)</span> across all units that every participate in the treatment</li>
</ul>
</div>
</section>
<section id="target-parameters-1" class="slide level2">
<h2>Target Parameters</h2>
<p>To understand the discussion later, it is also helpful to think of <span class="math inline">\(ATT(g,t)\)</span> as a <span class="alert">building block</span> for the other parameters discussed above. In particular:</p>
<div class="columns">
<div class="fragment column">
<p><span class="alert">Event Study</span> <span class="math display">\[\begin{align*}
  ATT^{ES}(e) = \sum_{g \in \bar{\mathcal{G}}} w^{ES}(g,e) ATT(g,g+e)
\end{align*}\]</span> where <span class="math display">\[\begin{align*}
  w^{ES}(g,e) = \indicator{g \in \mathcal{G}_e} \P(G=g|G\in \mathcal{G}_e)
\end{align*}\]</span></p>
</div><div class="fragment column">
<p><span class="alert">Overall ATT</span> <span class="math display">\[\begin{align*}
  ATT^O = \sum_{g \in \bar{\mathcal{G}}} \sum_{t=g}^{\mathcal{T}} w^O(g,t) ATT(g,t)
\end{align*}\]</span> where <span class="math display">\[\begin{align*}
  w^O(g,t) = \frac{\P(G=g|U=0)}{\mathcal{T}-g+1}
\end{align*}\]</span></p>
</div>
</div>
<div class="fragment">
<p><br></p>
<p>In other words, if we can identify/recover <span class="math inline">\(ATT(g,t)\)</span>, then we can proceed to recover <span class="math inline">\(ATT^{ES}(e)\)</span> and <span class="math inline">\(ATT^O\)</span>.</p>
</div>
</section>
<section id="did-identification-of-attgt" class="slide level2">
<h2>DID Identification of <span class="math inline">\(ATT(g,t)\)</span></h2>
<p><br></p>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Multiple Period Version of Parallel Trends Assumption</strong></p>
</div>
<div class="callout-content">
<p>For all groups <span class="math inline">\(g \in \bar{\mathcal{G}}\)</span> (all groups except the never-treated group) and for all time periods <span class="math inline">\(t=2,\ldots,\mathcal{T}\)</span>, <span class="math display">\[\begin{align*}
  \E[\Delta Y_{t}(0) | G=g] = \E[\Delta Y_{t}(0) | U=1]
\end{align*}\]</span></p>
</div>
</div>
</div>
<p><br></p>
<div class="fragment">
<p>Using very similar arguments as before, can show that <span class="math display">\[\begin{align*}
  ATT(g,t) = \E[Y_t - Y_{g-1} | G=g] - \E[Y_t - Y_{g-1} | U=1]
\end{align*}\]</span></p>
</div>
<div class="fragment">
<p>where the main difference is that we use <span class="math inline">\((g-1)\)</span> as the <span class="alert">base period</span> (this is the period right before group <span class="math inline">\(g\)</span> becomes treated).</p>
</div>
</section>
<section id="extensionssummary" class="slide level2">
<h2>Extensions/Summary</h2>
<p>The previous discussion emphasizes a general purpose identification strategy with staggered treatment adoption:</p>
<div class="fragment">
<p>Step 1: Target disaggregated treatment effect parameters (i.e., group-time average treatment effects)</p>
<ul>
<li><p>You can use many existing approaches for this step (generally with very minor modification) that work for smaller problems without staggered treatment adoption</p></li>
<li><p>Discussion above has been for DID identification strategy, but other possibilities fit into this framework: conditioning on lagged outcomes, unit-specific linear trends, interactive fixed effects, change-in-changes, triple differences, etc.</p></li>
</ul>
</div>
<div class="fragment">
<p>Step 2: (If desired) combine disaggregated treatment effects into lower dimensional summary treatment effect parameter</p>
</div>
</section>
<section id="estimation-1" class="slide level2">
<h2>Estimation</h2>
<p>We are going to follow the approach in Callaway and Sant’Anna (2021) of directly estimating <span class="math inline">\(ATT(g,t)\)</span> based on the previous identification result (code is available in R: <code>did</code>, Stata: <code>csdid</code>, Python: <code>csdid</code>):</p>
<p><span class="math display">\[\begin{align*}
  \widehat{ATT}(g,t) = \frac{1}{n_g} \sum_{i=1}^n \indicator{G_i = g} (Y_{it} - Y_{ig-1}) - \frac{1}{n_0} \sum_{i=1}^n \indicator{U_i = 1} (Y_{it} - Y_{ig-1})
\end{align*}\]</span></p>
<div class="fragment">
<h3 id="other-approaches">Other approaches</h3>
<ol type="1">
<li><p>Sun and Abraham (2021), R: <code>fixest</code>, Stata: <code>eventstudyinteract</code></p></li>
<li><p>Wooldridge (2021), R: <code>etwfe</code>, Stata: <code>JWDID</code></p></li>
<li><p>de Chaisemartin and d’Haultfoeuille (2020), R: <code>DIDmultiplegt</code>, Stata: <code>did_multiplegt</code></p></li>
<li><p>Gardner (2021) / Borusyak, Jaravel, Spiess (2022), R: <code>did2s</code>, Stata: <code>did2s</code> and <code>did_imputation</code></p></li>
<li><p>“Clean controls” (Cengiz, Dube, Lindner, and Zipperer (2019) and Dube, Girardi, Jorda, and Taylor (2023)), Stata: <code>stackedev</code></p></li>
</ol>
<div class="fragment">
<p>See Baker, Larcker, Wang (2022) and Callaway (2023) for more substantially more details.</p>
</div>
</div>
</section>
<section id="additional-issues-alternative-comparison-group" class="slide level2">
<h2>Additional Issues: Alternative Comparison Group</h2>
<p>Above, we used the “never-treated” group (i.e., <span class="math inline">\(U_i=1\)</span>) as the comparison group, but there are other possibilities:</p>
<ul>
<li>Not-yet-treated group: includes both <span class="math inline">\(U_i=1\)</span> as well as other units that satisfy <span class="math inline">\(G_i &gt; t\)</span></li>
<li>Not-yet-but-eventually-treated group: don’t include <span class="math inline">\(U_i=1\)</span></li>
<li>Other possibilities as well…</li>
</ul>
<p><br></p>
</section>
<section id="additional-issues-anticipation" class="slide level2">
<h2>Additional Issues: Anticipation</h2>
<p>In many applications, units may observe that a policy is about to be implemented and go ahead and change their behaviors before the policy is actually implemented.</p>
<ul>
<li>This is straightforward to deal with. If there is one period of anticipation, you can set the base period to be <span class="math inline">\(g-2\)</span> rather than <span class="math inline">\(g-1\)</span>, so that</li>
</ul>
<p><span class="math display">\[ATT(g,t) = \E[Y_t - Y_{g-2} | G=g] - \E[Y_t - Y_{g-2} | U=1]\]</span></p>
</section></section>
<section>
<section id="limitations-of-twfe-regressions" class="title-slide slide level1 center" data-visibility="uncounted">
<h1>Limitations of TWFE Regressions</h1>

</section>
<section id="goodman-bacon-2021" class="slide level2">
<h2>Goodman-Bacon (2021)</h2>
<p><span class="alert-blue">Goodman-Bacon (2021) intuition:</span> <span class="math inline">\(\alpha\)</span> “comes from” comparisons between the path of outcomes for units whose <span class="alert">treatment status changes</span> relative to the path of outcomes for units whose <span class="alert">treatment status stays the same</span> over time.</p>
<div class="fragment">
<ul>
<li><p>Some comparisons are for groups that become treated to <span class="alert">not-yet-treated</span> groups (these are very much in the spirit of DID)</p></li>
<li><p>Other comparisons are for groups that become treated relative to <span class="alert">already-treated</span> groups (these comparisons are not rationalized by parallel trends assumptions)</p>
<ul>
<li>This can be especially problematic when there are treatment effect dynamics. Dynamics imply different trends from what would have happened absent the treatment.</li>
</ul></li>
</ul>
</div>
</section>
<section id="de-chaisemartin-and-dhaultfoeuille-2020" class="slide level2">
<h2>de Chaisemartin and d’Haultfoeuille (2020)</h2>
<p><span class="alert-blue">de Chaisemartin and d’Haultfoeuille (2020) intuition:</span> You can write <span class="math inline">\(\alpha\)</span> as a weighted average of <span class="math inline">\(ATT(g,t)\)</span></p>
<p>First, a decomposition: <span class="math display">\[\begin{align*}
\alpha &amp;= \sum_{g \in \bar{\mathcal{G}}} \sum_{t=g}^{\mathcal{T}}  w^{TWFE}(g,t) \Big( \E[(Y_{t} - Y_{g-1}) | G=g] - \E[(Y_{t} - Y_{g-1}) | U=1] \Big) \\
  &amp; + \sum_{g \in \bar{\mathcal{G}}} \sum_{t=1}^{g-1} w^{TWFE}(g,t) \Big( \E[(Y_{t} - Y_{g-1}) | G=g] - \E[(Y_{t} - Y_{g-1}) | U=1] \Big)
\end{align*}\]</span></p>
<div class="fragment">
<p>Second, under parallel trends:<br>
<span class="math display">\[\begin{align*}
\alpha = \sum_{g \in \bar{\mathcal{G}}} \sum_{t=g}^{\mathcal{T}} w^{TWFE}(g,t) ATT(g,t)
\end{align*}\]</span></p>
<ul>
<li><p>But the weights are (non-transparently) driven by the estimation method</p></li>
<li><p>These weights have some good / bad / strange properties such as possibly being negative</p></li>
</ul>
<aside class="notes">
<ul>
<li><p>negative weights can be ruled out if there are no treatment effect dynamics</p></li>
<li><p>depend on relative group sizes</p></li>
<li><p>for a fixed group more weight on earlier periods</p></li>
<li><p>for a fixed time period more weight on earlier treated groups</p></li>
<li><p>weights would change if you added an extra pre-treatment period</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section></section>
<section>
<section id="empirical-example" class="title-slide slide level1 center" data-visibility="uncounted">
<h1>Empirical Example</h1>

</section>
<section id="empirical-example-minimum-wages-and-employment" class="slide level2">
<h2>Empirical Example: Minimum Wages and Employment</h2>
<ul>
<li>Use county-level data from 2003-2007 during a period where the federal minimum wage was flat</li>
</ul>
<div class="fragment">
<ul>
<li><p>Exploit minimum wage changes across states</p>
<ul>
<li>Any state that increases their minimum wage above the federal minimum wage will be considered as treated</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Interested in the effect of the minimum wage on teen employment</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>We’ll also make a number of simplifications:
<ul>
<li>not worry much about issues like clustered standard errors</li>
<li>not worry about variation in the amount of the minimum wage change (or whether it keeps changing) across states</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<p><span class="alert">Goals:</span></p>
<ul>
<li><p>Get some experience with an application and DID-related code</p></li>
<li><p>Assess how much do the issues that we have been talking about matter in practice</p></li>
</ul>
</div>
</section>
<section id="code" class="slide level2">
<h2>Code</h2>
<p>Full code is available on Mixtape website.</p>
<p><span class="alert">R packages used in empirical example</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(did)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(BMisc)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(twfeweights)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(fixest)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://github.com/bcallaway11/did_chapter/raw/master/mw_data_ch2.RData"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setup-data" class="slide level2">
<h2>Setup Data</h2>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># drops NE region and a couple of small groups</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>mw_data_ch2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(mw_data_ch2, (G <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2004</span>,<span class="dv">2006</span>,<span class="dv">2007</span>,<span class="dv">0</span>)) <span class="sc">&amp;</span> (region <span class="sc">!=</span> <span class="st">"1"</span>))</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">head</span>(mw_data_ch2[,<span class="fu">c</span>(<span class="st">"id"</span>,<span class="st">"year"</span>,<span class="st">"G"</span>,<span class="st">"lemp"</span>,<span class="st">"lpop"</span>,<span class="st">"lavg_pay"</span>,<span class="st">"region"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      id year    G     lemp     lpop lavg_pay region
554 8003 2001 2007 5.556828 9.614137 10.05750      4
555 8003 2002 2007 5.356586 9.623972 10.09712      4
556 8003 2003 2007 5.389072 9.620859 10.10761      4
557 8003 2004 2007 5.356586 9.626548 10.14034      4
558 8003 2005 2007 5.303305 9.637958 10.17550      4
559 8003 2006 2007 5.342334 9.633056 10.21859      4</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># drop 2007 as these are right before fed. minimum wage change</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>data2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(mw_data_ch2, G<span class="sc">!=</span><span class="dv">2007</span> <span class="sc">&amp;</span> year <span class="sc">&gt;=</span> <span class="dv">2003</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co"># keep 2007 =&gt; larger sample size</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>data3 <span class="ot">&lt;-</span> <span class="fu">subset</span>(mw_data_ch2, year <span class="sc">&gt;=</span> <span class="dv">2003</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="twfe-regression-1" class="slide level2">
<h2>TWFE Regression</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>twfe_res2 <span class="ot">&lt;-</span> fixest<span class="sc">::</span><span class="fu">feols</span>(lemp <span class="sc">~</span> post <span class="sc">|</span> id <span class="sc">+</span> year,</span>
<span id="cb5-2"><a href="#cb5-2"></a>                           <span class="at">data=</span>data2,</span>
<span id="cb5-3"><a href="#cb5-3"></a>                           <span class="at">cluster=</span><span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(twfe_res2), <span class="at">gof_omit=</span><span class="st">".*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table" data-quarto-postprocess="true" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;(1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">post</td>
<td style="text-align: center;">−0.038</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">(0.008)</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="attgt-callaway-and-santanna" class="slide level2">
<h2><span class="math inline">\(ATT(g,t)\)</span> (Callaway and Sant’Anna)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>attgt <span class="ot">&lt;-</span> did<span class="sc">::</span><span class="fu">att_gt</span>(<span class="at">yname=</span><span class="st">"lemp"</span>,</span>
<span id="cb7-2"><a href="#cb7-2"></a>                     <span class="at">idname=</span><span class="st">"id"</span>,</span>
<span id="cb7-3"><a href="#cb7-3"></a>                     <span class="at">gname=</span><span class="st">"G"</span>,</span>
<span id="cb7-4"><a href="#cb7-4"></a>                     <span class="at">tname=</span><span class="st">"year"</span>,</span>
<span id="cb7-5"><a href="#cb7-5"></a>                     <span class="at">data=</span>data2,</span>
<span id="cb7-6"><a href="#cb7-6"></a>                     <span class="at">control_group=</span><span class="st">"nevertreated"</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>                     <span class="at">base_period=</span><span class="st">"universal"</span>)</span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="fu">tidy</span>(attgt)[,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>] <span class="co"># print results, drop some extra columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             term group time    estimate   std.error
1  ATT(2004,2003)  2004 2003  0.00000000          NA
2  ATT(2004,2004)  2004 2004 -0.03266653 0.020060591
3  ATT(2004,2005)  2004 2005 -0.06827991 0.020485157
4  ATT(2004,2006)  2004 2006 -0.12335404 0.021714005
5  ATT(2004,2007)  2004 2007 -0.13109136 0.024539485
6  ATT(2006,2003)  2006 2003 -0.03408910 0.011639612
7  ATT(2006,2004)  2006 2004 -0.01669977 0.008098019
8  ATT(2006,2005)  2006 2005  0.00000000          NA
9  ATT(2006,2006)  2006 2006 -0.01939335 0.008933296
10 ATT(2006,2007)  2006 2007 -0.06607568 0.009083188</code></pre>
</div>
</div>
</section>
<section id="plot-attgts" class="slide level2">
<h2>Plot <span class="math inline">\(ATT(g,t)\)</span>’s</h2>

<img data-src="DID-Introduction_files/figure-revealjs/unnamed-chunk-9-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="compute-atto" class="slide level2">
<h2>Compute <span class="math inline">\(ATT^O\)</span></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>attO <span class="ot">&lt;-</span> did<span class="sc">::</span><span class="fu">aggte</span>(attgt, <span class="at">type=</span><span class="st">"group"</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="fu">summary</span>(attO)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
did::aggte(MP = attgt, type = "group")

Reference: Callaway, Brantly and Pedro H.C. Sant'Anna.  "Difference-in-Differences with Multiple Time Periods." Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; 


Overall summary of ATT's based on group/cohort aggregation:  
     ATT    Std. Error     [ 95%  Conf. Int.]  
 -0.0571        0.0083    -0.0733     -0.0409 *


Group Effects:
 Group Estimate Std. Error [95% Simult.  Conf. Band]  
  2004  -0.0888     0.0185       -0.1273     -0.0504 *
  2006  -0.0427     0.0083       -0.0600     -0.0255 *
---
Signif. codes: `*' confidence band does not cover 0

Control Group:  Never Treated,  Anticipation Periods:  0
Estimation Method:  Doubly Robust</code></pre>
</div>
</div>
<div class="fragment">
<p><a href="DID-Introduction.html#/event-study">Event Study</a></p>
</div>
</section>
<section id="comments" class="slide level2">
<h2>Comments</h2>
<p>The differences between the CS estimates and the TWFE estimates are fairly large here: the CS estimate is about 50% larger than the TWFE estimate, though results are qualitatively similar.</p>
<div class="fragment">
<p><a href="DID-Introduction.html#/de-chaisemartin-and-dhaultfoeuille-weights">Additional Details</a></p>
</div>
</section></section>
<section>
<section id="appendix" class="title-slide slide level1 center" data-visibility="uncounted">
<h1>Appendix</h1>

</section>
<section id="event-study" class="slide level2" data-visibility="uncounted">
<h2>Event Study</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>attes <span class="ot">&lt;-</span> <span class="fu">aggte</span>(attgt, <span class="at">type=</span><span class="st">"dynamic"</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">ggdid</span>(attes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="DID-Introduction_files/figure-revealjs/unnamed-chunk-11-1.png" width="960" class="r-stretch"><p><a href="DID-Introduction.html#/compute-atto">Back</a></p>
</section>
<section id="de-chaisemartin-and-dhaultfoeuille-weights" class="slide level2" data-visibility="uncounted">
<h2>de Chaisemartin and d’Haultfoeuille weights</h2>

<img data-src="DID-Introduction_files/figure-revealjs/unnamed-chunk-12-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="atto-weights" class="slide level2" data-visibility="uncounted">
<h2><span class="math inline">\(ATT^O\)</span> weights</h2>

<img data-src="DID-Introduction_files/figure-revealjs/unnamed-chunk-13-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="weight-comparison" class="slide level2" data-visibility="uncounted">
<h2>Weight Comparison</h2>

<img data-src="DID-Introduction_files/figure-revealjs/unnamed-chunk-14-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="discussion" class="slide level2" data-visibility="uncounted">
<h2>Discussion</h2>
<p>To summarize: <span class="math inline">\(ATT^O = -0.057\)</span> while <span class="math inline">\(\alpha^{TWFE} = -0.038\)</span>. This difference can be fully accounted for</p>
<ul>
<li><p>Pre-treatment differences in paths of outcomes across groups: explains about 64% of the difference</p></li>
<li><p>Differences in weights applied to the same post-treatment <span class="math inline">\(ATT(g,t)\)</span>: explains about 36% of the difference. [If you apply the post-treatment weights and “zero out” pre-treatment differences, the estimate would be <span class="math inline">\(-0.050\)</span>.]</p></li>
</ul>
<div class="fragment">
<p>In my experience: this is fairly representative of how much new DID approaches matter relative to TWFE regressions. It does not seem like “catastrophic failure” of TWFE, but (in my view) these are meaningful differences (and, e.g., given slightly different <span class="math inline">\(ATT(g,t)\)</span>’s, the difference in the weighting schemes could change the qualitative results).</p>
<ul>
<li>Of course, this whole discussion hinges crucially on how much treatment effect heterogeneity there is. More TE Het <span class="math inline">\(\implies\)</span> more sensitivity to weighting schemes [just looking at TWFE regression does not give insight into how much TE Het there is.]</li>
</ul>
</div>
</section>
<section id="additional-comments-on-weights" class="slide level2" data-visibility="uncounted">
<h2>Additional Comments on Weights</h2>
<p>One more comment: there is a lot concern about <span class="alert">negative weights</span> (both in econometrics and empirical work).</p>
<div class="fragment">
<ul>
<li><p>There were no negative weights in the example above, but the weights still weren’t great.</p>
<ul>
<li>No negative weights does rule out “sign reversal”</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>But, in my view, the <span class="alert">more important issue is the non-transparent weighting scheme</span>.
<ul>
<li>Example 1: If you try using <code>data3</code> (the data that includes <span class="math inline">\(G=2007\)</span>), you will get a negative weight on <span class="math inline">\(ATT(g=2004,t=2007)\)</span>. But it turns out not to matter much, and TWFE works better in this case than in the case that I showed you.</li>
<li>Example 2: Alternative treatment effect parameter <span class="math inline">\(\rightarrow\)</span></li>
</ul></li>
</ul>
</div>
</section>
<section id="simple-aggregation" class="slide level2" data-visibility="uncounted">
<h2>“Simple” Aggregation</h2>
<p>Consider the following alternative aggregated treatment effect parameter <span class="math display">\[\begin{align*}
  ATT^{simple} := \sum_{t=g}^\mathcal{T} ATT(g,t) \frac{\P(G=g | G \in \bar{\mathcal{G}})}{\sum_{t=g}^{\mathcal{T}} \P(G=g| G \in \bar{\mathcal{G}})}
\end{align*}\]</span> Consider imputation so that you have <span class="math inline">\(Y_{it}-\hat{Y}_{it}(0)\)</span> available in all periods. This is the <span class="math inline">\(ATT\)</span> parameter that you get by averaging all of those.</p>
<div class="fragment">
<p>Relative to <span class="math inline">\(ATT^O\)</span>, early treated units get more weight (because we have more <span class="math inline">\(Y_{it}-\hat{Y}_{it}(0)\)</span> for them).</p>
</div>
<div class="fragment">
<p>By construction, weights are all positive. However, they are different from <span class="math inline">\(ATT^O\)</span> weights</p>
</div>
</section>
<section id="simple-aggregation-1" class="slide level2" data-visibility="uncounted">
<h2>“Simple” Aggregation</h2>

<img data-src="DID-Introduction_files/figure-revealjs/unnamed-chunk-17-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="simple-aggregation-2" class="slide level2" data-visibility="uncounted">
<h2>“Simple” Aggregation</h2>
<p>Besides the violations of parallel trends in pre-treatment periods, these weights are further away from <span class="math inline">\(ATT^O\)</span> than the TWFE regression weights are!</p>
<div class="fragment">
<p>In fact, you calculate <span class="math inline">\(ATT^{simple} = -0.065\)</span> (13% larger in magnitude that <span class="math inline">\(ATT^O\)</span>)</p>
</div>
<div class="fragment">
<p>Finally, if you are “content with” non-negative weights, then you can get any summary measure from <span class="math inline">\(-0.019\)</span> (the smallest <span class="math inline">\(ATT(g,t)\)</span>) to <span class="math inline">\(-0.13\)</span> (the largest). This is a wide range of estimates.</p>
</div>
<div class="fragment">
<p>In my view, the discussion above suggests that clearly stating a target aggregate treatment effect parameter and choosing weights that target that parameter is probably more important than checking for negative weights</p>
<p><a href="DID-Introduction.html#/comments">Back</a></p>
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="DID-Introduction_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="DID-Introduction_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="DID-Introduction_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="DID-Introduction_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="DID-Introduction_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="DID-Introduction_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="DID-Introduction_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="DID-Introduction_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="DID-Introduction_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="DID-Introduction_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>